import{CHAMPION_URL}from"./modules/utils.js";import{CHAMPION_IDS}from"./modules/championIDs.js";import{displayChampion}from"./modules/displayChampion.js";import{updateFavouriteChampion}from"./modules/updateFavouriteChampion.js";const CHAMPIONS_PER_PAGE=12;let allChampions=[],allAssassins=[],allFighters=[],allMages=[],allMarksmans=[],allSupports=[],allTanks=[],indiceActual=0;async function fetchAndDisplayChampions(){if(0===allChampions.length){const a=localStorage.getItem("championsData");let l;if(a){const l=JSON.parse(a);allChampions.push(...l)}else l=CHAMPION_IDS.map((a=>fetch(`${CHAMPION_URL}/${a}.json`).then((a=>a.json())).then((l=>l.data[a]))));try{if(l){const a=await Promise.all(l);allChampions.push(...a),localStorage.setItem("championsData",JSON.stringify(allChampions))}allAssassins=allChampions.filter((a=>"Assassin"==a.tags[0])),allFighters=allChampions.filter((a=>"Fighter"==a.tags[0])),allMages=allChampions.filter((a=>"Mage"==a.tags[0])),allMarksmans=allChampions.filter((a=>"Marksman"==a.tags[0])),allSupports=allChampions.filter((a=>"Support"==a.tags[0])),allTanks=allChampions.filter((a=>"Tank"==a.tags[0]));for(let a=0;a<12;a++)displayChampion(allChampions[indiceActual+a]);indiceActual+=12}catch(a){console.error("Failed to fetch champions: ",a)}}}let championsParaCargar=allChampions;const roleButtons=document.querySelectorAll(".role-btn");roleButtons.forEach((a=>a.addEventListener("click",(()=>{championsGrid.innerHTML="",document.getElementById("loadMore").classList.remove("hidden"),indiceActual=0;const l=a.id;championsParaCargar="assassin"===l?allAssassins:"fighter"===l?allFighters:"mage"===l?allMages:"marksman"===l?allMarksmans:"support"===l?allSupports:"tank"===l?allTanks:allChampions;for(let a=0;a<12;a++)displayChampion(championsParaCargar[indiceActual+a]);indiceActual+=12,roleButtons.forEach((a=>a.classList.remove("role-active"))),a.classList.add("role-active")}))));const favouriteChampion=localStorage.getItem("favouriteChampion");favouriteChampion&&updateFavouriteChampion(JSON.parse(favouriteChampion)),fetchAndDisplayChampions(),document.getElementById("loadMore").addEventListener("click",(()=>{for(let a=0;indiceActual+a<championsParaCargar.length&&a<12;a++)displayChampion(championsParaCargar[indiceActual+a]);indiceActual+=12,indiceActual>=championsParaCargar.length&&document.getElementById("loadMore").classList.add("hidden")}));